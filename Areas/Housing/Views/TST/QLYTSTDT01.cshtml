
@{
    ViewBag.Title = "QLYTSTDT01";
}
<div class="container">
    <div class="page-inner">
        <div class="page-header">
            <h3 class="fw-bold mb-3">ใบตรวจสอบคุณภาพสุกรก่อนขาย</h3>
            <ul class="breadcrumbs mb-3">
                <li class="nav-home">
                    <a href="#">
                        <i class="icon-home"></i>
                    </a>
                </li>
                <li class="separator">
                    <i class="icon-arrow-right"></i>
                </li>
                <li class="nav-item">
                    <a href="@Url.Action("Index", "Home", new { Area = "Housing" })">การจัดการในฟาร์มสุกร</a>
                </li>
                <li class="separator">
                    <i class="icon-arrow-right"></i>
                </li>
                <li class="nav-item">
                    <a href="#">ใบตรวจสอบคุณภาพสุกรก่อนขาย</a>
                </li>
            </ul>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">สร้างข้อมูลตรวจสอบคุณภาพ</h3>
                    </div>
                    <div class="card-body">
                        <form class="m-form m-form--fit m-form--label-align-right">
                            @using (Html.BeginForm("QLYTSTDT01", "TST", FormMethod.Get, new { enctype = "multipart/form-data", @class = " bordered-row" }))
                            {
                                <div class="row">
                                    <div class="col-md-6 col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group mb-3 validate-input" data-validate="จำเป็นต้องระบุประเภท">
                                                <span class="input-group-text form-control col-lg-4" id="basic-addon1">ประเภท</span>
                                                <select class="form-select form-control" id="typeSelect" name="typeSelect" required>
                                                    @foreach (var cqt in ViewBag.CTRL_QLY_TST)
                                                    {
                                                        <option value="@cqt.QLY_TST_TP" @(cqt.QLY_TST_TP == "PD0129" ? "selected" : "")>@cqt.QLY_TST_NM</option>
                                                    }
                                                </select>
                                                @*<select class="form-select form-control" id="typeSelect" name="typeSelect" required>
                                                <option value="PD0129">สุกรหย่านม FM-PD-01/29</option>
                                                <option value="PD0122">สุกรอนุบาล FM-PD-01/22</option>
                                                <option value="PD0142">สุกรขุน FM-PD-01/42</option>
                                                <option value="PD0124">สุกรรุ่นพันธุ์ FM-PD-01/24</option>
                                            </select>*@
                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="col-md-6 col-lg-4" id="pigSelect" style="display: none;">
                                        <div class="form-group">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text form-control col-lg-3" id="basic-addon1">ประเภทสุกร</span>
                                                <select class="form-select form-control" id="pigTypeSelect" name="pigTypeSelect" required>
                                                    <option value="1">สุกรขุน</option>
                                                    <option value="2">สุกรแม่พันธุ์</option>
                                                    <option value="3">สุกรพ่อพันธุ์</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>*@
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group mb-3 validate-input" data-validate="จำเป็นต้องระบุฟาร์ม">
                                                <span class="input-group-text col-lg-2 form-control" id="basic-addon1">ฟาร์ม</span>
                                                <select class="form-select dropdown-multiple" id="siteId" name="siteId" required disabled>
                                                    @foreach (var sit in ViewBag.MAS_SITE)
                                                    {
                                                        <option value="@sit.SITE_ID" @(sit.SITE_ID == "BT" ? "selected" : "")>@sit.SITE_NM_TH</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 col-lg-8">
                                        <div class="form-group">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text col-md-1" id="basic-addon1">เล้า</span>
                                                <select class="form-select form-control dropdown-multiple" id="housingId" name="housingId" multiple="multiple">
                                                    <option value="ALL" selected="selected">ALL</option>
                                                    @foreach (var hsg in ViewBag.MAS_HSG)
                                                    {
                                                        <option value="@hsg.HSG_CODE">@hsg.HSG_CODE</option>
                                                    }
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                                <div class="row">
                                    <div class="col-md-6 col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group mb-4 validate-input" data-validate="จำเป็นต้องระบุ">
                                                <span class="input-group-text col-lg-4" id="basic-addon1">วันที่ตรวจสอบ</span>
                                                <input type="text"
                                                       id="testDate"
                                                       name="testDate"
                                                       class="form-control"
                                                       placeholder="Select Date"
                                                       aria-describedby="basic-addon1" required />
                                                <span class="input-group-icon">
                                                    <i class="fas fa-calendar-alt"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text col-lg-5" id="basic-addon1">สัปดาห์ที่ตรวจสอบ</span>
                                                <input type="text"
                                                       id="week"
                                                       class="form-control"
                                                       aria-describedby="basic-addon1" readonly />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-4">
                                        <div class="form-group">
                                            <div class="input-group mb-3">
                                                <span class="input-group-text col-lg-5" id="basic-addon1">สัปดาห์ที่เลี้ยง</span>
                                                <input type="text"
                                                       class="form-control"
                                                       id="weekBreed"
                                                       aria-describedby="basic-addon1" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer d-flex" style="justify-content:flex-end !important">
                                    <button type="button" id="SEARCH" class="btn btn-primary btn-round" style="z-index: 1;">Search</button>
                                </div>
                            
                         </form>
                    </div>
                    <div class="card-body body-qly-test" style="display:none">
                        <div class="card-header">
                            <div class="col-md-6 col-lg-10">
                            <span class="card-title text-primary">
                                รายละเอียดการตรวจสอบคุณภาพ
                            </span>
                         </div>
                        </div>
                        <div class="tab-content mt-3 mb-3" id="line-tabContent1">
                            <div class="tab-pane fade show active table-responsive tab-content mt-3 mb-3" id="line-tab1" role="tabpanel">
                                <table id="tb_detail_1" style="width:100%;"
                                       class="display table table-striped table-hover table-bordered">
                                    <thead>
                                        <tr style="text-align:center !important">
                                            <th rowspan="2" width="2%" style="text-align:center !important">No.</th>
                                            <th rowspan="2"></th>
                                            <th rowspan="2"></th>
                                            <th rowspan="2">เล้า</th>
                                            <th colspan="7">1.ประมาณการน้ำหนักสุกรที่ผ่านเกณฑ์ (กก.)</th>
                                            <th colspan="11">2.สุกรที่ไม่ผ่านเกณฑ์มาตรฐาน ตามลักษณะผิดปกติ (ตัว)</th>
                                            <th rowspan="2">รวมข้อ 1 และ 2</th>
                                            <th rowspan="2"></th>
                                            @*<th colspan="2">3. การตรวจสอบผลิตภัณฑ์ด้านอื่นๆ / หมายเหตุเพิ่มเติม</th>
                                            <th rowspan="2"></th>*@
                                        </tr>
                                        <tr style="text-align:center !important">
                                            <th>&lt;4</th>
                                            <th>4 - 5</th>
                                            <th>&gt;5 - 6</th>
                                            <th>&gt;6 - 7</th>
                                            <th>&gt;7 - 8</th>
                                            <th>&gt;8</th>
                                            <th>รวม</th>
                                            <th>1) 9 กีบ</th>
                                            <th>2) หลังแหลมโทรม</th>
                                            <th>3) น้ำหนักต่ำกว่า 3 กก.</th>
                                            <th>4) ข้อบวมเดินผิดปกติ</th>
                                            <th>5) ไส้เลื่อนอักเสบ/ไส้ติด</th>
                                            <th>6) ทองแดง</th>
                                            <th>7) ผิวหนังอักเสบรุนแรง</th>
                                            <th>8) ลักษณะโครงสร้างผิดปกติ</th>
                                            <th>9) ป่วย</th>
                                            <th>10) อื่น ๆ</th>
                                            <th>รวม</th>
                                            @*<td>1) อายุหย่านมเฉลี่ย</td>
                                                <td>2) น้ำหนักเฉลี่ย</td>*@
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!--<tr>
                        <td style="text-align:center !important;">1</td>
                        <td>B01</td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>-->
                                        @*<td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>*@
                                        <!--<td>
                            <div class="d-flex align-items-center selectgroup-pills">
                                <div class="icon-padding">
                                    <button type="button"
                                            class="selectgroup-button selectgroup-button-icon">
                                        <i class="bi bi-camera-reels text-secondary"></i>
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align:center !important;">2</td>
                        <td>B02</td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td><input type="number" class="form-control" /></td>
                        <td>
                            <div class="d-flex align-items-center selectgroup-pills">
                                <div class="icon-padding">
                                    <button type="button"
                                            class="selectgroup-button selectgroup-button-icon">
                                        <i class="bi bi-camera-reels text-secondary"></i>
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>-->
                                    </tbody>
                                    <tfoot>

                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="tab-content mt-3 mb-3" id="line-tabContent2" style="display:none">
                            <div class="tab-pane fade show active table-responsive tab-content mt-3 mb-3" id="line-tab2" role="tabpanel">
                                <table id="tb_detail_2" style="width:180%"
                                       class="display table table-striped table-hover table-bordered">
                                    <thead>
                                        <tr style="text-align:center !important">
                                            <th rowspan="2" width="2%" style="text-align:center !important">No.</th>
                                            <th colspan="2"></th>
                                            <th rowspan="2">เล้า</th>
                                            <th colspan="7">1.ประมาณการน้ำหนักสุกรที่ผ่านเกณฑ์ (กก.)</th>
                                            <th colspan="11">2.สุกรที่ไม่ผ่านเกณฑ์มาตรฐาน ตามลักษณะผิดปกติ (ตัว)</th>
                                            <td rowspan="2">รวมข้อ 1 และ 2</td>
                                            <th colspan="11">3.ลักษณะผิดปกติที่ยอมรับได้ (ตัว)</th>
                                            <th rowspan="2">4. การตรวจสอบผลิตภัณฑ์ด้านอื่นๆ / หมายเหตุเพิ่มเติม</th>
                                        </tr>
                                        <tr style="text-align:center !important">
                                            <th></th>
                                            <th></th>
                                            <th>&lt; 12</th>
                                            <th>12-15</th>
                                            <th>&gt;16-19</th>
                                            <th>&gt;20-23</th>
                                            <th>&gt;24-27</th>
                                            <th>&gt;=28</th>
                                            <th>รวม</th>
                                            <th>1) 9 กีบ</th>
                                            <th>2) หลังแหลมโทรม</th>
                                            <th>3) น้ำหนักต่ำกว่า 3 กก.</th>
                                            <th>4) ข้อบวมเดินผิดปกติ</th>
                                            <th>5) ใส้เลื่อนอักเสบ/ไส้ติด</th>
                                            <th>6) ทองแดง</th>
                                            <th>7) ผิวหนังอักเสบรุนแรง</th>
                                            <th>8) ลักษณะโครงสร้างผิดปกติ</th>
                                            <th>9) ป่วย</th>
                                            <th>10) อื่น ๆ</th>
                                            <th>รวม</th>
                                            <th>1) ไส้เลื่อนอัณทะ</th>
                                            <th>2) ไส้เลื่อนสะดือ</th>
                                            <th>3) หูหางเป็นแผล</th>
                                            <th>4) หูบวม/หงิก</th>
                                            <th>5) หลังแหลมแข็งแรง</th>
                                            <th>6) ขาเจ็บเล็กน้อย</th>
                                            <th>7) ถ่ายท้อง</th>
                                            <th>8) ผิวหนังอักเสบไม่รุนแรง</th>
                                            <th>9)  อื่น ๆ (1)</th>
                                            <th>10) อื่น ๆ (2)</th>
                                            <th>รวม</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*<tr>
                                            <td style="text-align:center !important;">1</td>
                                            <td>C01/1</td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td>
                                                <div class="d-flex align-items-center selectgroup-pills">
                                                    <div class="icon-padding">
                                                        <button type="button"
                                                                class="selectgroup-button selectgroup-button-icon">
                                                            <i class="bi bi-camera-reels text-secondary"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align:center !important;">2</td>
                                            <td>C01/2</td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td>
                                                <div class="d-flex align-items-center selectgroup-pills">
                                                    <div class="icon-padding">
                                                        <button type="button"
                                                                class="selectgroup-button selectgroup-button-icon">
                                                            <i class="bi bi-camera-reels text-secondary"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>*@
                                    </tbody>
                                    <tfoot>

                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="tab-content mt-3 mb-3" id="line-tabContent3" style="display:none">
                            <div class="tab-pane fade show active table-responsive tab-content mt-3 mb-3" id="line-tab3" role="tabpanel">
                                <table id="tb_detail_3" style="width:190%"
                                       class="display table table-striped table-hover table-bordered">
                                    <thead>
                                        <tr style="text-align:center !important">
                                            <th rowspan="2" width="2%" style="text-align:center !important">No.</th>
                                            <th colspan="2"></th>
                                            <th rowspan="2">เล้า</th>
                                            <th colspan="6">1.ประมาณการน้ำหนักสุกร (กก.)</th>
                                            <th colspan="11">2.สุกรที่ไม่ผ่านเกณฑ์มาตรฐาน อาการ/สาเหตุ (ตัว)</th>
                                            <th colspan="13">3.ลักษณะความผิดปกติที่ยอมรับได้ (ตัว)</th>
                                            <th rowspan="2">4.การตรวจสอบผลิตภัณฑ์ด้านอื่นๆ / หมายเหตุเพิ่มเติม</th>
                                            <th rowspan="2"></th>
                                        </tr>
                                        <tr style="text-align:center !important">
                                            <th></th>
                                            <th></th>
                                            <th>60 - 79</th>
                                            <th>&gt;80 - 89</th>
                                            <th>&gt;90 - 120</th>
                                            <th>&gt;121 - 150</th>
                                            <th>&gt;150</th>
                                            <th>รวม (ตัว)</th>
                                            <th>1) 9 กีบ</th>
                                            <th>2) ผอมโทรม ซีดเหลือง</th>
                                            <th>3) น้ำหนักต่ำกว่าเกณฑ์ &lt; 60 กก.</th>
                                            <th>4) ข้อบวมเดินผิดปกติ</th>
                                            <th>5) ใส้เลื่อนอักเสบ/ใส้ติด</th>
                                            <th>6) นอนชักเกร็ง กระแตเวียน</th>
                                            <th>7) ผิวหนังอักเสบ</th>
                                            <th>8) ลักษณะโครงสร้างผิดปกติ</th>
                                            <th>9) อื่นๆ</th>
                                            <th>รวม</th>
                                            <th>1) ไส้เลื่อนอัณทะ</th>
                                            <th>2) ไส้เลื่อนสะดือ/ทองแดง</th>
                                            <th>3) หูบวม/หงิก หางเป็นแผล</th>
                                            <th>4) ฝี หนองคอ สะโพก ขา</th>
                                            <th>5) สุกรแคระแกร็น</th>
                                            <th>6) กีบเป็นแผลเล็กน้อย</th>
                                            <th>7) ขาเจ็บเล็กน้อย</th>
                                            <th>8) ถ่ายท้อง อาหารไม่ย่อย</th>
                                            <th>9) ผิวหนังอักเสบไม่รุนแรง</th>
                                            <th>10) ลักษณะโครงสร้างผิดปกติเล็กน้อย</th>
                                            <th>11) อื่น ๆ (1)</th>
                                            <th>12) อื่น ๆ (2)</th>
                                            <th>รวม</th>
                                            <th>รวมจำนวนตัวทั้งหมด = (1+2+3)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @*<tr>
                                            <td style="text-align:center !important;">1</td>
                                            <td>C01/1</td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="text" class="form-control" /></td>
                                            <td>
                                                <div class="d-flex align-items-center selectgroup-pills">
                                                    <div class="icon-padding">
                                                        <button type="button"
                                                                class="selectgroup-button selectgroup-button-icon">
                                                            <i class="bi bi-camera-reels text-secondary"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align:center !important;">2</td>
                                            <td>C01/2</td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="text" class="form-control" /></td>
                                            <td>
                                                <div class="d-flex align-items-center selectgroup-pills">
                                                    <div class="icon-padding">
                                                        <button type="button"
                                                                class="selectgroup-button selectgroup-button-icon">
                                                            <i class="bi bi-camera-reels text-secondary"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>*@
                                    </tbody>
                                    <tfoot>

                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="tab-content mt-3 mb-3" id="line-tabContent4" style="display:none">
                            <div class="tab-pane fade show active table-responsive tab-content mt-3 mb-3" id="line-tab4" role="tabpanel">
                                <table id="tb_detail_4" style="width:300%"
                                       class="display table table-striped table-hover table-bordered">
                                    <thead>
                                        <tr style="text-align:center !important">
                                            <th colspan="2"></th>
                                            <th colspan="30">1.ประมาณการน้ำหนักสุกรผ่านเกณฑ์(กก.)</th>
                                            <th colspan="45">2.สุกรที่ไม่ผ่านเกณฑ์มาตรฐาน อาการ/สาเหตุ (ตัว)</th>
                                            <th></th>
                                            <th colspan="16">3.ลักษณะความผิดปกติที่ยอมรับได้ (ตัว)</th>
                                            <th rowspan="4">4.การตรวจสอบผลิตภัณฑ์ด้านอื่นๆ / หมายเหตุเพิ่มเติม</th>
                                            <th rowspan="4"></th>
                                        </tr>
                                        <tr style="text-align:center !important">
                                            <th rowspan="3" width="2%" style="text-align:center !important">No.</th>
                                            <th rowspan="3">เล้า</th>
                                            <th colspan="5">60 - 79 </th>
                                            <th colspan="5">&gt;80 - 89 </th>
                                            <th colspan="5">&gt;90 - 120 </th>
                                            <th colspan="5">&gt;121 - 150 </th>
                                            <th colspan="5">&gt;150 </th>
                                            <th colspan="5">รวม</th>
                                            <th colspan="3">1) 9 กีบ</th>
                                            <th colspan="3">2) ผอมโทรม ซีดเหลือง</th>
                                            <th colspan="3">3) น้ำหนักต่ำกว่าเกณฑ์ &lt; 60 กก.</th>
                                            <th colspan="3">4) ข้อบวมเดินผิดปกติ, ลุกลำบาก</th>
                                            <th colspan="3">5) ไส้เลื่อนอักเสบ/ใส้ติด</th>
                                            <th colspan="3">6) นอนชักเกร็ง/กระแตเวียน</th>
                                            <th colspan="3">7) ผิวหนังอักเสบ</th>
                                            <th colspan="3">8) ลักษณะโครงสร้างผิดปกติมาก</th>
                                            <th colspan="3">9) อื่นๆ(1)</th>
                                            <th colspan="3">10) อื่นๆ(2)</th>
                                            <th colspan="3">11) อื่นๆ(3)</th>
                                            <th colspan="3">12) อื่นๆ(4)</th>
                                            <th colspan="3">13) อื่นๆ(5)</th>
                                            <th colspan="3">14) อื่นๆ(6)</th>
                                            <th colspan="3">รวมข้อ 2</th>
                                            <th rowspan="3">รวมทั้งหมด (1+2)</th>
                                            <th rowspan="3">1) ไส้เลื่อนอัณทะ</th>
                                            <th rowspan="3">2) ไส้เลื่อนสะดือ/ทองแดง</th>
                                            <th rowspan="3">3) หูบวม/หงิก หางเป็นแผล</th>
                                            <th rowspan="3">4) ฝี หนองคอ สะโพก ขา</th>
                                            <th rowspan="3">5) กีบเป็นแผลเล็กน้อย</th>
                                            <th rowspan="3">6) ขาเจ็บเล็กน้อย</th>
                                            <th rowspan="3">7) ถ่ายท้อง/อาหารไม่ย่อย</th>
                                            <th rowspan="3">8) ผิวหนังอักเสบไม่รุนแรง</th>
                                            <th rowspan="3">9) ลักษณะโครงสร้างผิดปกติเล็กน้อย</th>
                                            <th rowspan="3">10) อื่น ๆ (1)</th>
                                            <th rowspan="3">11) อื่น ๆ (2)</th>
                                            <th rowspan="3">12) อื่น ๆ (3)</th>
                                            <th rowspan="3">13) อื่น ๆ (4)</th>
                                            <th rowspan="3">14) อื่น ๆ (5)</th>
                                            <th rowspan="3">15) อื่น ๆ (6)</th>
                                            <th rowspan="3">รวมข้อ 3</th>
                                        </tr>
                                        <tr style="text-align:center !important">
                                            <th rowspan="2">สุกรขุน</th>
                                            <th colspan="2">สุกรแม่พันธุ์</th>
                                            <th colspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th colspan="2">สุกรแม่พันธุ์</th>
                                            <th colspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th colspan="2">สุกรแม่พันธุ์</th>
                                            <th colspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th colspan="2">สุกรแม่พันธุ์</th>
                                            <th colspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th colspan="2">สุกรแม่พันธุ์</th>
                                            <th colspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th colspan="2">สุกรแม่พันธุ์</th>
                                            <th colspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                            <th rowspan="2">สุกรขุน</th>
                                            <th rowspan="2">สุกรแม่พันธุ์</th>
                                            <th rowspan="2">สุกรพ่อพันธุ์</th>
                                        </tr>
                                        <tr style="text-align:center !important">
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                            <th>ปกติ</th>
                                            <th>เกรดB</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="text-align:center !important;">1</td>
                                            <td>F01</td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="text" class="form-control" /></td>
                                            <td>
                                                <div class="d-flex align-items-center selectgroup-pills">
                                                    <div class="icon-padding">
                                                        <button type="button"
                                                                class="selectgroup-button selectgroup-button-icon">
                                                            <i class="bi bi-camera-reels text-secondary"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align:center !important;">2</td>
                                            <td>F02</td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="number" class="form-control" /></td>
                                            <td><input type="text" class="form-control" /></td>
                                            <td>
                                                <div class="d-flex align-items-center selectgroup-pills">
                                                    <div class="icon-padding">
                                                        <button type="button"
                                                                class="selectgroup-button selectgroup-button-icon">
                                                            <i class="bi bi-camera-reels text-secondary"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                    <tfoot>

                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="card-action" style="display:none">
                        <button id="SAVE" class="btn btn-primary btn-round fix btn-fixed-position">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="card">
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        if ('@ViewBag.typeSelect' != '') {
            $("#typeSelect").val(JSON.parse('@Html.Raw(Json.Encode(ViewBag.typeSelect))')).trigger("change");
        }
        if ('@ViewBag.siteId' != '') {
            $("#siteId").val(JSON.parse('@Html.Raw(Json.Encode(ViewBag.siteId))')).trigger("change");
        }
        if ('@ViewBag.housingId' != '') {
            $("#housingId").val(JSON.parse('@Html.Raw(Json.Encode(ViewBag.housingId))')).trigger("change");
        } else {
            //$('#housingId :nth-child(1)').prop('selected', true);
        }
        if ('@ViewBag.testDate' != '') {
            $("#testDate").val(JSON.parse('@Html.Raw(Json.Encode(ViewBag.testDate))')).trigger("change");
            $("#testDate").datepicker({
                todayHighlight: true,
                orientation: 'bottom left',
                format: 'dd-M-yyyy',
                todayBtn: 'linked',
                autoclose: 'true',
                assumeNearbyYear: true
            });
        } else {
            $("#testDate").datepicker({
                todayHighlight: true,
                orientation: 'bottom left',
                format: 'dd-M-yyyy',
                todayBtn: 'linked',
                autoclose: 'true',
                assumeNearbyYear: true
            }).datepicker("setDate", 'now');
            getWeekNo($("#testDate").val())
        }

        $("#testDate").on('change', function () {
            getWeekNo($("#testDate").val())
        });

        function getWeekNo(strDate) {
            $("#week").val(getWeekNumber(formatDate(strDate)));
            $("#weekBreed").val(getWeekNumber(formatDate(strDate)));
        }

        $('#typeSelect, #siteId').select2({
            theme: "bootstrap-5",
            width: $(this).data('width') ? $(this).data('width') : $(this).hasClass('w-100') ? '100%' : 'style',
            placeholder: $(this).data('placeholder'),
            closeOnSelect: true,
            tags: true
        });

        $('#housingId').select2({
            theme: "bootstrap-5",
            width: $(this).data('width') ? $(this).data('width') : $(this).hasClass('w-100') ? '100%' : 'style',
            placeholder: $(this).data('placeholder'),
            closeOnSelect: false,
            tags: true
        });

        $("#typeSelect").change(function () {
            hideaffterselect();

            let typeSelect = $("#typeSelect").val();
            var HSGTypeCode = "B";
            if (typeSelect == 'PD0129') {
                $("#line-tabContent1").show();
                HSGTypeCode = "B";
            } else if (typeSelect == 'PD0122') {
                $("#line-tabContent2").show();
                HSGTypeCode = "C";
            } else if (typeSelect == 'PD0142') {
                $("#line-tabContent3").show();
                HSGTypeCode = "C";
            } else if (typeSelect == 'PD0124') {
                $("#line-tabContent4").show();
                $("#pigSelect").show();
                HSGTypeCode = "C";
            }
            callAPIByHousing(HSGTypeCode);
        });

        function hideaffterselect() {
            $("#line-tabContent1").hide();
            $("#line-tabContent2").hide();
            $("#line-tabContent3").hide();
            $("#line-tabContent4").hide();
            $("#pigSelect").hide();
        }

        /*$("#housingId").on('change', function () {
            let hsg_select = $("#housingId").val();
            if (hsg_select.length > 1) {
                let all_value = (hsg_select.indexOf("ALL") > -1);
                if (all_value) {

                    console.log(hsg_select);
                    $('#housingId :nth-child(1)').prop('selected', false);
                } 
            }
            
        });*/
        //$('#housingId').val('').trigger('chosen:updated');

        function callAPIByHousing(HSGTypeCode) {
            $.ajax({
                type: "GET",
                url: pathServer + "/TST/GET_HOUSING",
                data: {
                    HSGTypeCode: HSGTypeCode,
                },
                success: function (response) {
                    $('#housingId').empty()
                    $("#housingId").append('<option value=ALL selected>ALL</option>');
                    $.each(response, function (index, value) {
                        $('#housingId').append($('<option/>', {
                            value: response[index].HSG_ID,
                            text: response[index].HSG_CODE
                        }));
                    });
                    //$('#housingId :nth-child(1)').prop('selected', true);
                    $("#SEARCH").click();
                },
                error: function (xhr) {
                    //Do Something to handle error
                }
            });
        }

        $("#SEARCH").on('click', function () {
            $(".body-qly-test").show();
            $(".card-action").show();

            var options = $('#housingId option');
            var values = $.map(options, function (option) {
                return option.value;
            });

            let housingCode;
            if (($("#housingId").val()[0] == 'ALL')) {
                housingCode = values;
            } else {
                housingCode = $("#housingId").val();
            }

            let typeSelect = $("#typeSelect").val();
            if (typeSelect == 'PD0129') {
                tableDetail1(housingCode);
            } else if (typeSelect == 'PD0122') {
                tableDetail2(housingCode);
            } else if (typeSelect == 'PD0142') {
                tableDetail3(housingCode);
            } else if (typeSelect == 'PD0124') {
                tableDetail4_temp();
                //tableDetail4(housingCode);
            }
        });

        function tableDetail1(housingCode) {
            tb_detail_1 = $("#tb_detail_1").DataTable({
                lengthChange: false,
                "processing": true, // for show progress bar
                "orderMulti": false, // for disable multiple column at once
                //"pageLength": 20,
                scrollCollapse: true,
                paging: false,
                searching: false,
                responsive: !0,
                ordering: true,
                info: true,
                bAutoWidth: false,
                order: [[1, "asc"]],
                "bDestroy": true,
                "ajax": {
                    url: pathServer + "/TST/QLYTSTDT01_SELECT",
                    type: "POST",
                    datatype: "json",
                    data: {
                        typeSelect: $("#typeSelect").val(),
                        siteId: $("#siteId").val(),
                        housingId: housingCode,
                        testDate: formatDate($("#testDate").val())
                    },
                    success: function (data) {
                        tb_detail_1.clear().draw();
                        tb_detail_1.rows.add(data.GET_QLY_TST).draw();
                        tb_detail_1.processing(false);
                    },
                },
                columnDefs: [
                    {
                        targets: [0],
                        orderable: false,
                        className: "text-center",
                    },
                    {
                        targets: [1, 2],
                        visible: false,
                        className: "text-center",
                    },
                    {
                        targets: [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
                        orderable: false,
                        className: "text-center",
                    },
                ],
                "columns": [
                    {
                        "render": function (data, type, full, meta) {
                            var page = (Math.ceil(meta.settings._iDisplayStart / meta.settings._iDisplayLength)) * 10; // index row
                            return (meta.row + 1) + page;
                        }
                    },
                    { 'data': 'UK_KEY' },
                    { 'data': 'AVY_QLY_TST_PGGRY_SK' },
                    { 'data': 'HSG_ID' },
                    {
                        'data': 'WGHT_RNG_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_1 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_2 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_3 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_4 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_5 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_6',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_6 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' id='TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_1 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_2 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_3 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_4 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_5 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_6',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_6 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_7',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_7 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_8',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_8 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_9',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_9 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_10',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_10--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_10 + "' onchange='ModifyDirectly(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' id='NOT_QUL_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' value='" + (numeral(row.TOT_AMT)._value + numeral(row.NOT_QUL_TOT_AMT)._value) + "' readonly/>";
                        }
                    },
                    {
                        mRender: function (data, type, row) {
                            var link = '#';
                            @*var link = '@HttpUtility.UrlDecode(Url.Action("MASACCDT03", "ACC", new {
                            AC_SK = "row_AC_SK"
                        }).ToString())';
                    link = link.replace("row_AC_SK", row.AC_SK);*@
                    var All_Botton = "<div class='d-flex align-items-center selectgroup-pills'>";
                    All_Botton = All_Botton + "<a href='" + link + "' class='selectgroup-button selectgroup-button-icon'><i class='bi bi-camera-reels text-secondary'></i></a>";
                    All_Botton = All_Botton + "</div>";
                    return All_Botton;
                        }
                    },
                ],
                "drawCallback": function (data, settings) {
                    $(".int").inputmask({
                        'alias': 'numeric',
                        'integerDigits': '12',
                        'digits': 0,
                        'min': '0',
                        'prefix': '',
                        rightAlign: true,
                        allowMinus: false,
                        autoGroup: true,
                        groupSeparator: ','
                    });
                    $('#' + focusedElementId).focus();
                },
            });

            tb_detail_1.on('order.dt', function () {
                tb_detail_1.column(0, { order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw(false);
        }
        //------------------------End detail 1--------------------//

        function tableDetail2(housingCode) {
            tb_detail_2 = $("#tb_detail_2").DataTable({
            lengthChange: false,
            "processing": true, // for show progress bar
            "orderMulti": false, // for disable multiple column at once
            //"pageLength": 20,
            scrollCollapse: true,
            paging: false,
            searching: false,
            responsive: !0,
            ordering: true,
            info: true,
            bAutoWidth: false,
            order: [[1, "asc"]],
            "bDestroy": true,
            "ajax": {
                url: pathServer + "/TST/QLYTSTDT01_SELECT",
                type: "POST",
                datatype: "json",
                data: {
                    typeSelect: $("#typeSelect").val(),
                    siteId: $("#siteId").val(),
                    housingId: housingCode,
                    testDate: formatDate($("#testDate").val())
                },
                success: function (data) {
                    tb_detail_2.clear().draw();
                    tb_detail_2.rows.add(data.GET_QLY_TST).draw();
                    tb_detail_2.processing(false);
                },
            },
            columnDefs: [
                {
                    targets: [0],
                    orderable: false,
                    className: "text-center",
                },
                {
                    targets: [1, 2],
                    visible: false,
                    className: "text-center",
                },
                {
                    targets: [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34],
                    orderable: false,
                    className: "text-center",
                },
            ],
            "columns": [
                {
                    "render": function (data, type, full, meta) {
                        var page = (Math.ceil(meta.settings._iDisplayStart / meta.settings._iDisplayLength)) * 10; // index row
                        return (meta.row + 1) + page;
                    }
                },
                { 'data': 'UK_KEY' },
                { 'data': 'AVY_QLY_TST_PGGRY_SK' },
                { 'data': 'HSG_ID' },
                {
                    'data': 'WGHT_RNG_AMT_1',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_1 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'WGHT_RNG_AMT_2',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_2 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'WGHT_RNG_AMT_3',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_3 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'WGHT_RNG_AMT_4',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_4 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'WGHT_RNG_AMT_5',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_5 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'WGHT_RNG_AMT_6',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_6 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'TOT_AMT',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int' autocomplete='off' id='TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.TOT_AMT + "' readonly/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_1',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_1 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_2',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_2 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_3',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_3 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_4',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_4 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_5',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_5 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_6',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_6 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_7',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_7 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_8',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_8 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_9',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_9 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_CAUS_AMT_10',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_10--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_10 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'NOT_QUL_TOT_AMT',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int' autocomplete='off' id='NOT_QUL_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_TOT_AMT + "' readonly/>";
                    }
                },
                {
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int' value='" + (row.TOT_AMT + row.NOT_QUL_TOT_AMT) + "' readonly/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_1',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_1 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_2',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_2 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_3',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_3 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_4',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_4 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_5',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_5 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_6',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_6 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_7',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_7 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_8',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_8 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_9',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_9 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TP_AMT_10',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_10--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_10 + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                    'data': 'ABRM_TOT_AMT',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TOT_AMT + "' readonly/>";
                    }
                },
                {
                    'data': 'REM',
                    render: function (data, type, row, meta) {
                        return "<input type='text' class='form-control character txt-user-input' autocomplete='off' id='REM--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + (row.REM == null ? '' : row.REM) + "' onchange='ModifyDirectlyTb2(this)'/>";
                    }
                },
                {
                mRender: function (data, type, row) {
                    var link = '#';
                    @*var link = '@HttpUtility.UrlDecode(Url.Action("MASACCDT03", "ACC", new {
                    AC_SK = "row_AC_SK"
                                    }).ToString())';
                link = link.replace("row_AC_SK", row.AC_SK);*@
                var All_Botton = "<div class='d-flex align-items-center selectgroup-pills'>";
                All_Botton = All_Botton + "<a href='" + link + "' class='selectgroup-button selectgroup-button-icon'><i class='bi bi-camera-reels text-secondary'></i></a>";
                All_Botton = All_Botton + "</div>";
                return All_Botton;
                            }
                        },
                    ],
                "drawCallback": function (data, settings) {
                    $(".int").inputmask({
                        'alias': 'numeric',
                        'integerDigits': '12',
                        'digits': 0,
                        'min': '0',
                        'prefix': '',
                        rightAlign: true,
                        allowMinus: false,
                        autoGroup: true,
                        groupSeparator: ','
                    });
                    $('#' + focusedElementId).focus();
                },
                });

            tb_detail_2.on('order.dt', function () {
                tb_detail_2.column(0, { order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw(false);
        }
        //------------------------End detail 2--------------------//

        function tableDetail3(housingCode) {
            tb_detail_3 = $("#tb_detail_3").DataTable({
                lengthChange: false,
                "processing": true, // for show progress bar
                "orderMulti": false, // for disable multiple column at once
                //"pageLength": 20,
                scrollCollapse: true,
                paging: false,
                searching: false,
                responsive: !0,
                ordering: true,
                info: true,
                bAutoWidth: false,
                order: [[1, "asc"]],
                "bDestroy": true,
                "ajax": {
                    url: pathServer + "/TST/QLYTSTDT01_SELECT",
                    type: "POST",
                    datatype: "json",
                    data: {
                        typeSelect: $("#typeSelect").val(),
                        siteId: $("#siteId").val(),
                        housingId: housingCode,
                        testDate: formatDate($("#testDate").val())
                    },
                    success: function (data) {
                        tb_detail_3.clear().draw();
                        tb_detail_3.rows.add(data.GET_QLY_TST).draw();
                        tb_detail_3.processing(false);
                    },
                },
                columnDefs: [
                    {
                        targets: [0],
                        orderable: false,
                        className: "text-center",
                    },
                    {
                        targets: [1, 2],
                        visible: false,
                        className: "text-center",
                    },
                    {
                        targets: [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35],
                        orderable: false,
                        className: "text-center",
                    },
                ],
                "columns": [
                    {
                        "render": function (data, type, full, meta) {
                            var page = (Math.ceil(meta.settings._iDisplayStart / meta.settings._iDisplayLength)) * 10; // index row
                            return (meta.row + 1) + page;
                        }
                    },
                    { 'data': 'UK_KEY' },
                    { 'data': 'AVY_QLY_TST_PGGRY_SK' },
                    { 'data': 'HSG_ID' },
                    {
                        'data': 'WGHT_RNG_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_1 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_2 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_3 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_4 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_5 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' id='TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_1 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_2 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_3 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_4 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_5 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_6',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_6 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_7',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_7 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_8',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_8 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_9',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_9 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' id='NOT_QUL_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_1 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_2 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_3 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_4 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_5 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_6',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_6 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_7',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_7 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_8',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_8 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_9',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_9 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_10',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_10--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_10 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_11',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_11--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_11 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_12',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_12--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_12 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' value='" + (row.TOT_AMT + row.NOT_QUL_TOT_AMT + row.ABRM_TOT_AMT) + "' readonly/>";
                        }
                    },
                    {
                        'data': 'REM',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control character txt-user-input' autocomplete='off' id='REM--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + (row.REM == null ? '' : row.REM) + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        mRender: function (data, type, row) {
                            var link = '#';
                            @*var link = '@HttpUtility.UrlDecode(Url.Action("MASACCDT03", "ACC", new {
                            AC_SK = "row_AC_SK"
                        }).ToString())';
                    link = link.replace("row_AC_SK", row.AC_SK);*@
                            var All_Botton = "<div class='d-flex align-items-center selectgroup-pills'>";
                    All_Botton = All_Botton + "<a href='" + link + "' class='selectgroup-button selectgroup-button-icon'><i class='bi bi-camera-reels text-secondary'></i></a>";
                    All_Botton = All_Botton + "</div>";
                    return All_Botton;
                        }
                    },
                ],
                "drawCallback": function (data, settings) {
                    $(".int").inputmask({
                        'alias': 'numeric',
                        'integerDigits': '12',
                        'digits': 0,
                        'min': '0',
                        'prefix': '',
                        rightAlign: true,
                        allowMinus: false,
                        autoGroup: true,
                        groupSeparator: ','
                    });
                    $('#' + focusedElementId).focus();
                },
            });

            tb_detail_3.on('order.dt', function () {
                tb_detail_3.column(0, { order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw(false);
        }
        //------------------------End detail 3--------------------//
        function tableDetail4_temp() {
            tb_detail_4 = $("#tb_detail_4").DataTable({
                lengthChange: false,
                "processing": true, // for show progress bar
                "orderMulti": false, // for disable multiple column at once
                //"pageLength": 20,
                scrollCollapse: true,
                paging: false,
                searching: false,
                responsive: !0,
                ordering: true,
                info: true,
                bAutoWidth: false,
                order: [[1, "asc"]],
                "bDestroy": true,
                "drawCallback": function (data, settings) {
                    $(".int").inputmask({
                        'alias': 'numeric',
                        'integerDigits': '12',
                        'digits': 0,
                        'min': '0',
                        'prefix': '',
                        rightAlign: true,
                        allowMinus: false,
                        autoGroup: true,
                        groupSeparator: ','
                    });
                    $('#' + focusedElementId).focus();
                },
            });
        }
        function tableDetail4(housingCode) {
            tb_detail_4 = $("#tb_detail_4").DataTable({
                lengthChange: false,
                "processing": true, // for show progress bar
                "orderMulti": false, // for disable multiple column at once
                //"pageLength": 20,
                scrollCollapse: true,
                paging: false,
                searching: false,
                responsive: !0,
                ordering: true,
                info: true,
                bAutoWidth: false,
                order: [[1, "asc"]],
                "bDestroy": true,
                "ajax": {
                    url: pathServer + "/TST/QLYTSTDT01_SELECT",
                    type: "POST",
                    datatype: "json",
                    data: {
                        typeSelect: $("#typeSelect").val(),
                        siteId: $("#siteId").val(),
                        housingId: housingCode,
                        testDate: formatDate($("#testDate").val())
                    },
                    success: function (data) {
                        tb_detail_4.clear().draw();
                        tb_detail_4.rows.add(data.GET_QLY_TST).draw();
                        tb_detail_4.processing(false);
                    },
                },
                columnDefs: [
                    {
                        targets: [0],
                        orderable: false,
                        className: "text-center",
                    },
                    {
                        targets: [1, 2],
                        visible: false,
                        className: "text-center",
                    },
                    {
                        targets: [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35],
                        orderable: false,
                        className: "text-center",
                    },
                ],
                "columns": [
                    {
                        "render": function (data, type, full, meta) {
                            var page = (Math.ceil(meta.settings._iDisplayStart / meta.settings._iDisplayLength)) * 10; // index row
                            return (meta.row + 1) + page;
                        }
                    },
                    { 'data': 'UK_KEY' },
                    { 'data': 'AVY_QLY_TST_PGGRY_SK' },
                    { 'data': 'HSG_ID' },
                    {
                        'data': 'WGHT_RNG_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_1 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_2 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_3 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_4 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'WGHT_RNG_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='WGHT_RNG_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.WGHT_RNG_AMT_5 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' id='TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_1 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_2 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_3 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_4 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_5 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_6',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_6 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_7',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_7 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_8',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_8 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_CAUS_AMT_9',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='NOT_QUL_CAUS_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_CAUS_AMT_9 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'NOT_QUL_TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' autocomplete='off' id='NOT_QUL_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.NOT_QUL_TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_1',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_1--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_1 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_2',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_2--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_2 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_3',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_3--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_3 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_4',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_4--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_4 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_5',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_5--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_5 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_6',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_6--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_6 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_7',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_7--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_7 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_8',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_8--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_8 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_9',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_9--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_9 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_10',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_10--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_10 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_11',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_11--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_11 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TP_AMT_12',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TP_AMT_12--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TP_AMT_12 + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        'data': 'ABRM_TOT_AMT',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int txt-user-input' autocomplete='off' id='ABRM_TOT_AMT--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + row.ABRM_TOT_AMT + "' readonly/>";
                        }
                    },
                    {
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control int' value='" + (row.TOT_AMT + row.NOT_QUL_TOT_AMT + row.ABRM_TOT_AMT) + "' readonly/>";
                        }
                    },
                    {
                        'data': 'REM',
                        render: function (data, type, row, meta) {
                            return "<input type='text' class='form-control character txt-user-input' autocomplete='off' id='REM--" + row.UK_KEY + "' row='" + meta.row + "' col='" + meta.col + "' value='" + (row.REM == null ? '' : row.REM) + "' onchange='ModifyDirectlyTb3(this)'/>";
                        }
                    },
                    {
                        mRender: function (data, type, row) {
                            var link = '#';
                            @*var link = '@HttpUtility.UrlDecode(Url.Action("MASACCDT03", "ACC", new {
                            AC_SK = "row_AC_SK"
                        }).ToString())';
                        link = link.replace("row_AC_SK", row.AC_SK);*@
                                var All_Botton = "<div class='d-flex align-items-center selectgroup-pills'>";
                                All_Botton = All_Botton + "<a href='" + link + "' class='selectgroup-button selectgroup-button-icon'><i class='bi bi-camera-reels text-secondary'></i></a>";
                                All_Botton = All_Botton + "</div>";
                                return All_Botton;
                            }
                        },
                    ],
                    "drawCallback": function (data, settings) {
                    $(".int").inputmask({
                        'alias': 'numeric',
                        'integerDigits': '12',
                        'digits': 0,
                        'min': '0',
                        'prefix': '',
                        rightAlign: true,
                        allowMinus: false,
                        autoGroup: true,
                        groupSeparator: ','
                    });
                    $('#' + focusedElementId).focus();
                },
                });

            tb_detail_4.on('order.dt', function () {
                tb_detail_4.column(0, { order: 'applied' }).nodes().each(function (cell, i) {
                    cell.innerHTML = i + 1;
                });
            }).draw(false);
        }
        //------------------------End detail 4--------------------//

        let focusedElementId;
        // Detect focus for any focusable element within a specific container
        $('#tb_detail_1, #tb_detail_2, #tb_detail_3, #tb_detail_4').on('focusin', 'input, select, textarea', function () {
            focusedElementId = $(this).attr('id');
        });

        $($(typeSelect).parent()).removeClass('alert-validate');
        $($(siteId).parent()).removeClass('alert-validate');
        $($(testDate).parent()).removeClass('alert-validate');

        $("#SAVE").click(function () {
            let type_select = $("#typeSelect").val();
            if (type_select != "" && $("#siteId").val() != "" && $("#testDate").val() != "") {
                Swal.fire({
                    icon: "question",
                    title: 'Do you want to save?',
                    text: "Are you sure to Create this data",
                    showCancelButton: true,
                    confirmButtonText: 'Yes',
                }).then((result) => {
                    if (result.isConfirmed) {
                        if (type_select == "PD0129") {
                            saveTbd1();
                        } else if (type_select == "PD0122") {
                            saveTbd2();
                        } else if (type_select == "PD0142") {
                            saveTbd3();
                        } else if (type_select == "PD0124") {
                            //saveTbd4();
                        }
                    }
                });
            } else {
                if (type_select == "") {
                    $($(typeSelect).parent()).addClass('alert-validate');
                }
                if ($("#siteId").val() == "") {
                    $($(siteId).parent()).addClass('alert-validate');
                }
                if ($("#testDate").val() == "") {
                    $($(testDate).parent()).addClass('alert-validate-date');
                }
            }
        });
    });

    function formatDate(date) {
        var d = new Date(date),
            month = '' + (d.getMonth() + 1),
            day = '' + d.getDate(),
            year = d.getFullYear();
        if (month.length < 2)
            month = '0' + month;
        if (day.length < 2)
            day = '0' + day;
        return [year, month, day].join('-');
    }

    function dateToJson(value) {
        var unixTimestamp = new Date(value).getTime();
        return `/Date(${unixTimestamp})/`;
    }

    function getWeekNumber(dateStr) {
        // Parse the date from the string
        var date = new Date(dateStr);
        // Set the date to the nearest Thursday: current date + 4 - current day number (with Sunday as 7)
        date.setDate(date.getDate() + 4 - (date.getDay() || 7));
        // Get the first day of the year
        var yearStart = new Date(date.getFullYear(), 0, 1);
        // Calculate full weeks to nearest Thursday
        var weekNumber = Math.ceil((((date - yearStart) / 86400000) + 1) / 7);

        return weekNumber;
    }

    function ModifyDirectly(btn) {
        var id = $(btn).attr('id');
        var row = $(btn).attr('row');
        var col = $(btn).attr('col');
        var values = $("#" + id).val();
        var key = id.split('--')[1];
        focus = id;

        var indexDetail = tb_detail_1.rows().indexes().filter(function (value, index) {
            return key === tb_detail_1.row(value).data().UK_KEY;
        });

        var check = true;
        if (indexDetail !== undefined && tb_detail_1.row(indexDetail).length > 0) {
            var page = tb_detail_1.page.info();
            if (check == true) {
                tb_detail_1.page(page.page).cell(row, col).data(values).draw(false);
                Calculate(indexDetail);
            } else {
                tb_detail_1.page(page.page).cell(row, col).data(null).draw(false);
            }
        } else {
            console.log("Invalid row index:", indexDetail);
        }
    }

    function Calculate(indexDetail) {
        let page = tb_detail_1.page.info();

        let totalAmt = numeral(tb_detail_1.row(indexDetail).data().WGHT_RNG_AMT_1)._value
            + numeral(tb_detail_1.row(indexDetail).data().WGHT_RNG_AMT_2)._value
            + numeral(tb_detail_1.row(indexDetail).data().WGHT_RNG_AMT_3)._value
            + numeral(tb_detail_1.row(indexDetail).data().WGHT_RNG_AMT_4)._value
            + numeral(tb_detail_1.row(indexDetail).data().WGHT_RNG_AMT_5)._value
            + numeral(tb_detail_1.row(indexDetail).data().WGHT_RNG_AMT_6)._value;
        tb_detail_1.row(indexDetail).data().TOT_AMT = totalAmt;

        let notQulTotalAmt = numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_1)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_2)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_3)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_4)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_5)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_6)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_7)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_8)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_9)._value
            + numeral(tb_detail_1.row(indexDetail).data().NOT_QUL_CAUS_AMT_10)._value
        tb_detail_1.row(indexDetail).data().NOT_QUL_TOT_AMT = notQulTotalAmt;

        tb_detail_1.row(indexDetail).data(tb_detail_1.row(indexDetail).data()).draw();
        tb_detail_1.page(page.page).draw(false);
    }

    function ModifyDirectlyTb2(btn) {
        var id = $(btn).attr('id');
        var row = $(btn).attr('row');
        var col = $(btn).attr('col');
        var values = $("#" + id).val();
        var key = id.split('--')[1];
        focus = id;

        var indexDetail = tb_detail_2.rows().indexes().filter(function (value, index) {
            return key === tb_detail_2.row(value).data().UK_KEY;
        });

        var check = true;
        if (indexDetail !== undefined && tb_detail_2.row(indexDetail).length > 0) {
            var page = tb_detail_2.page.info();
            if (check == true) {
                tb_detail_2.page(page.page).cell(row, col).data(values).draw(false);
                CalculateTb2(indexDetail);
            } else {
                tb_detail_2.page(page.page).cell(row, col).data(null).draw(false);
            }
        } else {
            console.log("Invalid row index:", indexDetail);
        }
    }

    function CalculateTb2(indexDetail) {
        let page = tb_detail_2.page.info();

        let totalAmt = numeral(tb_detail_2.row(indexDetail).data().WGHT_RNG_AMT_1)._value
            + numeral(tb_detail_2.row(indexDetail).data().WGHT_RNG_AMT_2)._value
            + numeral(tb_detail_2.row(indexDetail).data().WGHT_RNG_AMT_3)._value
            + numeral(tb_detail_2.row(indexDetail).data().WGHT_RNG_AMT_4)._value
            + numeral(tb_detail_2.row(indexDetail).data().WGHT_RNG_AMT_5)._value
            + numeral(tb_detail_2.row(indexDetail).data().WGHT_RNG_AMT_6)._value;
        tb_detail_2.row(indexDetail).data().TOT_AMT = totalAmt;

        let notQulTotalAmt = numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_1)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_2)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_3)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_4)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_5)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_6)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_7)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_8)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_9)._value
            + numeral(tb_detail_2.row(indexDetail).data().NOT_QUL_CAUS_AMT_10)._value
        tb_detail_2.row(indexDetail).data().NOT_QUL_TOT_AMT = notQulTotalAmt;

        let abnormalTotalAmt = numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_1)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_2)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_3)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_4)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_5)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_6)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_7)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_8)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_9)._value
            + numeral(tb_detail_2.row(indexDetail).data().ABRM_TP_AMT_10)._value
        tb_detail_2.row(indexDetail).data().ABRM_TOT_AMT = abnormalTotalAmt;

        tb_detail_2.row(indexDetail).data(tb_detail_2.row(indexDetail).data()).draw();
        tb_detail_2.page(page.page).draw(false);
    }

    function ModifyDirectlyTb3(btn) {
        var id = $(btn).attr('id');
        var row = $(btn).attr('row');
        var col = $(btn).attr('col');
        var values = $("#" + id).val();
        var key = id.split('--')[1];
        focus = id;

        var indexDetail = tb_detail_3.rows().indexes().filter(function (value, index) {
            return key === tb_detail_3.row(value).data().UK_KEY;
        });

        var check = true;
        if (indexDetail !== undefined && tb_detail_3.row(indexDetail).length > 0) {
            var page = tb_detail_3.page.info();
            if (check == true) {
                tb_detail_3.page(page.page).cell(row, col).data(values).draw(false);
                CalculateTb3(indexDetail);
            } else {
                tb_detail_3.page(page.page).cell(row, col).data(null).draw(false);
            }
        } else {
            console.log("Invalid row index:", indexDetail);
        }
    }

    function CalculateTb3(indexDetail) {
        let page = tb_detail_3.page.info();

        let totalAmt = numeral(tb_detail_3.row(indexDetail).data().WGHT_RNG_AMT_1)._value
            + numeral(tb_detail_3.row(indexDetail).data().WGHT_RNG_AMT_2)._value
            + numeral(tb_detail_3.row(indexDetail).data().WGHT_RNG_AMT_3)._value
            + numeral(tb_detail_3.row(indexDetail).data().WGHT_RNG_AMT_4)._value
            + numeral(tb_detail_3.row(indexDetail).data().WGHT_RNG_AMT_5)._value
        tb_detail_3.row(indexDetail).data().TOT_AMT = totalAmt;

        let notQulTotalAmt = numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_1)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_2)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_3)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_4)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_5)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_6)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_7)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_8)._value
            + numeral(tb_detail_3.row(indexDetail).data().NOT_QUL_CAUS_AMT_9)._value
        tb_detail_3.row(indexDetail).data().NOT_QUL_TOT_AMT = notQulTotalAmt;

        let abnormalTotalAmt = numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_1)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_2)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_3)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_4)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_5)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_6)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_7)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_8)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_9)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_10)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_11)._value
            + numeral(tb_detail_3.row(indexDetail).data().ABRM_TP_AMT_12)._value
        tb_detail_3.row(indexDetail).data().ABRM_TOT_AMT = abnormalTotalAmt;

        tb_detail_3.row(indexDetail).data(tb_detail_3.row(indexDetail).data()).draw();
        tb_detail_3.page(page.page).draw(false);
    }

    function saveTbd1() {
        let AVY_QLY_TST_PGGRY = new Array();
        for (let i = 0; i < tb_detail_1.data().length; i++) {
            let avy_qly_tst = {};
            avy_qly_tst.SITE_ID = $("#siteId").val();
            avy_qly_tst.HSG_ID = tb_detail_1.data()[i].HSG_ID;
            avy_qly_tst.QLY_TST_TP = $("#typeSelect").val();
            avy_qly_tst.WK = $("#weekBreed").val();
            avy_qly_tst.DT_QLY_TST = formatDate($("#testDate").val());

            avy_qly_tst.WGHT_RNG_AMT_1 = numeral(tb_detail_1.data()[i].WGHT_RNG_AMT_1)._value;
            avy_qly_tst.WGHT_RNG_AMT_2 = numeral(tb_detail_1.data()[i].WGHT_RNG_AMT_2)._value;
            avy_qly_tst.WGHT_RNG_AMT_3 = numeral(tb_detail_1.data()[i].WGHT_RNG_AMT_3)._value;
            avy_qly_tst.WGHT_RNG_AMT_4 = numeral(tb_detail_1.data()[i].WGHT_RNG_AMT_4)._value;
            avy_qly_tst.WGHT_RNG_AMT_5 = numeral(tb_detail_1.data()[i].WGHT_RNG_AMT_5)._value;
            avy_qly_tst.WGHT_RNG_AMT_6 = numeral(tb_detail_1.data()[i].WGHT_RNG_AMT_6)._value;
            avy_qly_tst.TOT_AMT = numeral(tb_detail_1.data()[i].TOT_AMT)._value;

            avy_qly_tst.NOT_QUL_CAUS_AMT_1 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_1)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_2 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_2)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_3 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_3)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_4 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_4)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_5 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_5)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_6 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_6)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_7 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_7)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_8 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_8)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_9 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_9)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_10 = numeral(tb_detail_1.data()[i].NOT_QUL_CAUS_AMT_10)._value;
            avy_qly_tst.NOT_QUL_TOT_AMT = numeral(tb_detail_1.data()[i].NOT_QUL_TOT_AMT)._value;

            avy_qly_tst.NET_TOT_AMT = avy_qly_tst.TOT_AMT + avy_qly_tst.NOT_QUL_TOT_AMT;

            AVY_QLY_TST_PGGRY.push(avy_qly_tst);
        }
        callAPI(AVY_QLY_TST_PGGRY);
    }

    function saveTbd2(object) {
        let AVY_QLY_TST_PGGRY = new Array();
        for (let i = 0; i < tb_detail_2.data().length; i++) {
            let avy_qly_tst = {};
            avy_qly_tst.SITE_ID = $("#siteId").val();
            avy_qly_tst.HSG_ID = tb_detail_2.data()[i].HSG_ID;
            avy_qly_tst.QLY_TST_TP = $("#typeSelect").val();
            avy_qly_tst.WK = $("#weekBreed").val();
            avy_qly_tst.DT_QLY_TST = formatDate($("#testDate").val());

            avy_qly_tst.WGHT_RNG_AMT_1 = numeral(tb_detail_2.data()[i].WGHT_RNG_AMT_1)._value;
            avy_qly_tst.WGHT_RNG_AMT_2 = numeral(tb_detail_2.data()[i].WGHT_RNG_AMT_2)._value;
            avy_qly_tst.WGHT_RNG_AMT_3 = numeral(tb_detail_2.data()[i].WGHT_RNG_AMT_3)._value;
            avy_qly_tst.WGHT_RNG_AMT_4 = numeral(tb_detail_2.data()[i].WGHT_RNG_AMT_4)._value;
            avy_qly_tst.WGHT_RNG_AMT_5 = numeral(tb_detail_2.data()[i].WGHT_RNG_AMT_5)._value;
            avy_qly_tst.WGHT_RNG_AMT_6 = numeral(tb_detail_2.data()[i].WGHT_RNG_AMT_6)._value;
            avy_qly_tst.TOT_AMT = numeral(tb_detail_2.data()[i].TOT_AMT)._value;

            avy_qly_tst.NOT_QUL_CAUS_AMT_1 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_1)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_2 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_2)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_3 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_3)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_4 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_4)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_5 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_5)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_6 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_6)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_7 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_7)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_8 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_8)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_9 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_9)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_10 = numeral(tb_detail_2.data()[i].NOT_QUL_CAUS_AMT_10)._value;
            avy_qly_tst.NOT_QUL_TOT_AMT = numeral(tb_detail_2.data()[i].NOT_QUL_TOT_AMT)._value;

            avy_qly_tst.ABRM_TP_AMT_1 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_1)._value;
            avy_qly_tst.ABRM_TP_AMT_2 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_2)._value;
            avy_qly_tst.ABRM_TP_AMT_3 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_3)._value;
            avy_qly_tst.ABRM_TP_AMT_4 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_4)._value;
            avy_qly_tst.ABRM_TP_AMT_5 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_5)._value;
            avy_qly_tst.ABRM_TP_AMT_6 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_6)._value;
            avy_qly_tst.ABRM_TP_AMT_7 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_7)._value;
            avy_qly_tst.ABRM_TP_AMT_8 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_8)._value;
            avy_qly_tst.ABRM_TP_AMT_9 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_9)._value;
            avy_qly_tst.ABRM_TP_AMT_10 = numeral(tb_detail_2.data()[i].ABRM_TP_AMT_10)._value;
            avy_qly_tst.ABRM_TOT_AMT = numeral(tb_detail_2.data()[i].ABRM_TOT_AMT)._value;
            avy_qly_tst.REM = tb_detail_2.data()[i].REM;

            avy_qly_tst.NET_TOT_AMT = avy_qly_tst.TOT_AMT + avy_qly_tst.NOT_QUL_TOT_AMT + avy_qly_tst.ABRM_TOT_AMT;

            AVY_QLY_TST_PGGRY.push(avy_qly_tst);
        }
        callAPI(AVY_QLY_TST_PGGRY);
    }

    function saveTbd3(object) {
        let AVY_QLY_TST_PGGRY = new Array();
        for (let i = 0; i < tb_detail_3.data().length; i++) {
            let avy_qly_tst = {};
            avy_qly_tst.SITE_ID = $("#siteId").val();
            avy_qly_tst.HSG_ID = tb_detail_3.data()[i].HSG_ID;
            avy_qly_tst.QLY_TST_TP = $("#typeSelect").val();
            avy_qly_tst.WK = $("#weekBreed").val();
            avy_qly_tst.DT_QLY_TST = formatDate($("#testDate").val());

            avy_qly_tst.WGHT_RNG_AMT_1 = numeral(tb_detail_3.data()[i].WGHT_RNG_AMT_1)._value;
            avy_qly_tst.WGHT_RNG_AMT_2 = numeral(tb_detail_3.data()[i].WGHT_RNG_AMT_2)._value;
            avy_qly_tst.WGHT_RNG_AMT_3 = numeral(tb_detail_3.data()[i].WGHT_RNG_AMT_3)._value;
            avy_qly_tst.WGHT_RNG_AMT_4 = numeral(tb_detail_3.data()[i].WGHT_RNG_AMT_4)._value;
            avy_qly_tst.WGHT_RNG_AMT_5 = numeral(tb_detail_3.data()[i].WGHT_RNG_AMT_5)._value;
            avy_qly_tst.TOT_AMT = numeral(tb_detail_3.data()[i].TOT_AMT)._value;

            avy_qly_tst.NOT_QUL_CAUS_AMT_1 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_1)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_2 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_2)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_3 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_3)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_4 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_4)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_5 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_5)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_6 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_6)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_7 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_7)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_8 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_8)._value;
            avy_qly_tst.NOT_QUL_CAUS_AMT_9 = numeral(tb_detail_3.data()[i].NOT_QUL_CAUS_AMT_9)._value;
            avy_qly_tst.NOT_QUL_TOT_AMT = numeral(tb_detail_3.data()[i].NOT_QUL_TOT_AMT)._value;

            avy_qly_tst.ABRM_TP_AMT_1 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_1)._value;
            avy_qly_tst.ABRM_TP_AMT_2 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_2)._value;
            avy_qly_tst.ABRM_TP_AMT_3 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_3)._value;
            avy_qly_tst.ABRM_TP_AMT_4 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_4)._value;
            avy_qly_tst.ABRM_TP_AMT_5 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_5)._value;
            avy_qly_tst.ABRM_TP_AMT_6 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_6)._value;
            avy_qly_tst.ABRM_TP_AMT_7 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_7)._value;
            avy_qly_tst.ABRM_TP_AMT_8 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_8)._value;
            avy_qly_tst.ABRM_TP_AMT_9 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_9)._value;
            avy_qly_tst.ABRM_TP_AMT_10 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_10)._value;
            avy_qly_tst.ABRM_TP_AMT_11 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_11)._value;
            avy_qly_tst.ABRM_TP_AMT_12 = numeral(tb_detail_3.data()[i].ABRM_TP_AMT_12)._value;
            avy_qly_tst.ABRM_TOT_AMT = numeral(tb_detail_3.data()[i].ABRM_TOT_AMT)._value;
            avy_qly_tst.REM = tb_detail_3.data()[i].REM;

            avy_qly_tst.NET_TOT_AMT = avy_qly_tst.TOT_AMT + avy_qly_tst.NOT_QUL_TOT_AMT + avy_qly_tst.ABRM_TOT_AMT;

            AVY_QLY_TST_PGGRY.push(avy_qly_tst);
        }
        callAPI(AVY_QLY_TST_PGGRY);
    }

    function callAPI(OBJ_LIST){
        $.ajax({
            contentType: "application/json; charset=utf-8",// กำหนด content สำหรับส่งข้อมูลแบบ object or list
            type: "POST",
            url: pathServer + "/TST/QLYTSTDT01_INSERT",
            dataType: "json",
            data: JSON.stringify({ AVY_QLY_TST_PGGRY: OBJ_LIST }), //parameter Object,List
            xhr: function () {
                var xhr = new window.XMLHttpRequest();
                let timerInterval;
                xhr_loading(xhr);
                clearInterval(timerInterval);
                return xhr;
            },
            success: function (data) {
                clearInterval(interVal);
                $('#progress').css('width', 100 + "%");
                //successMessage.init();
                setTimeout(function () {
                    //Attach_File();
                    Swal.fire({
                        icon: "success",
                        title: 'Your data has been saved',
                        showConfirmButton: true,
                        confirmButtonText: 'OK'
                    }).then((result) => {
                        $("#SEARCH").click();
                        //location.reload();
                    });
                }, 1500);
            },
            error: function () {
                errorAlert.init();
            }
        });
    }

    jQuery(window).on("load", function () {
        setTimeout(function () {
            $("#SEARCH").click();
        }, 700);
    });
</script>
